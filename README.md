# Использование статического анализатора кода для обеспечения безопасности
##  Участок кода, содержащий инъекцию SQL
Вредоносное значение может быть присвоено переменной `$id`. И затем с помощью этой переменной формируется SQL запрос:
```php
$getid = "SELECT first_name, last_name FROM users WHERE user_id = '$id';";
$result = mysqli_query($GLOBALS["___mysqli_ston"], $getid );
```
![image](https://user-images.githubusercontent.com/53438664/200193216-cf8858cf-97be-4a39-99bf-c77685f1ead9.png)
**Источники:**
- [OWASP Top 10 2021 Category A3](https://owasp.org/Top10/A03_2021-Injection/ "OWASP Top 10 2021 Category A3") - Injection
- [MITRE, CWE-20](https://cwe.mitre.org/data/definitions/20 "MITRE, CWE-20") - Improper Input Validation
- [MITRE, CWE-89](https://cwe.mitre.org/data/definitions/89 "MITRE, CWE-89") - Improper Neutralization of Special Elements used in an SQL Command

## Кодревью
Сервис статического анализа кода указал следующие проблемы в исследуемом коде:
![image](https://user-images.githubusercontent.com/53438664/200193274-b31845db-07d5-4057-9a2d-93889bdcf6ba.png)

### Не следует использовать символы табуляции
Разработчикам не нужно настраивать ширину вкладок своих текстовых редакторов, чтобы иметь возможность читать исходный код.
### Файлы должны содержать пустую новую строку в конце
Некоторые инструменты работают лучше, когда файлы заканчиваются пустой строкой.
### Исходный код должен соответствовать стандартам форматирования
Общие соглашения о кодировании позволяют команде эффективно сотрудничать. Это правило вызывает проблемы из-за несоблюдения стандарта форматирования. Значения параметров по умолчанию соответствуют стандарту PSR2.
## Исправление кода
1. Применена технология PDO (PHP Data Objects — расширение для PHP, предоставляющее разработчику универсальный интерфейс для доступа к различным базам данных);
2. Добавлена проверки вводимого значения `$id` с помощью функции `is_numeric()`.
